<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login - EveS Jewels</title>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
<style>
body { font-family: 'Roboto', sans-serif; background:#fff8f0; color:#333; display:flex; justify-content:center; align-items:center; height:100vh; }
.container { background:#fceabb; padding:40px; border-radius:10px; box-shadow:0 4px 15px rgba(0,0,0,0.1); width:90%; max-width:400px; text-align:center; }
h1 { font-family:'Great Vibes', cursive; color:#f39f86; margin-bottom:25px; font-size:36px; }
input { width:80%; padding:10px; margin:10px 0; border-radius:5px; border:1px solid #f39f86; }
button { padding:10px 20px; background:#f39f86; color:#fff; border:none; border-radius:5px; cursor:pointer; margin:10px 0; }
button:hover { background:#f9d976; color:#000; }
</style>
</head>
<body>

<div class="container">
    <div id="loginStep">
        <h1>Login</h1>
        <input type="text" id="phoneInput" placeholder="Enter Phone Number"><br>
        <button id="sendOtpBtn">Send OTP</button>
    </div>

    <div id="otpStep" style="display:none;">
        <h1>Enter OTP</h1>
        <input type="text" id="otpInput" placeholder="Enter OTP"><br>
        <button id="verifyOtpBtn">Verify OTP</button>
    </div>

    <div id="detailsStep" style="display:none;">
        <h1>Your Details</h1>
        <input type="text" id="nameInput" placeholder="Name"><br>
        <input type="text" id="addressInput" placeholder="Address"><br>
        <input type="text" id="emailInput" placeholder="Email"><br>
        <button id="saveProfileBtn">Save Profile</button>
    </div>
</div>

<script>
// Elements
const loginStep = document.getElementById('loginStep');
const otpStep = document.getElementById('otpStep');
const detailsStep = document.getElementById('detailsStep');

const phoneInput = document.getElementById('phoneInput');
const sendOtpBtn = document.getElementById('sendOtpBtn');
const otpInput = document.getElementById('otpInput');
const verifyOtpBtn = document.getElementById('verifyOtpBtn');

const nameInput = document.getElementById('nameInput');
const addressInput = document.getElementById('addressInput');
const emailInput = document.getElementById('emailInput');
const saveProfileBtn = document.getElementById('saveProfileBtn');

let generatedOtp = '';
let isExistingUser = false;

sendOtpBtn.addEventListener('click', () => {
    const phone = phoneInput.value.trim();
    if (phone === '') {
        alert('Please enter a phone number.');
        return;
    }

    // Check if user already exists
    const storedUser = JSON.parse(localStorage.getItem('userProfile'));
    isExistingUser = (storedUser && storedUser.phone === phone);

    // Generate OTP for verification
    generatedOtp = Math.floor(1000 + Math.random() * 9000).toString();
    alert('Your OTP is: ' + generatedOtp); // Simulate SMS

    // Hide login step and show OTP step
    loginStep.style.display = 'none';
    otpStep.style.display = 'block';
});

verifyOtpBtn.addEventListener('click', () => {
    if (otpInput.value === generatedOtp) {
        // If OTP is correct
        if (isExistingUser) {
            alert("OTP verified! Redirecting to your profile.");
            window.location.href = 'profile.html';
        } else {
            alert("OTP verified! Please fill in your details to register.");
            otpStep.style.display = 'none';
            detailsStep.style.display = 'block';
        }
    } else {
        alert('Incorrect OTP, please try again.');
    }
});

saveProfileBtn.addEventListener('click', () => {
    const profileData = {
        name: nameInput.value.trim(),
        phone: phoneInput.value.trim(),
        address: addressInput.value.trim(),
        email: emailInput.value.trim()
    };

    if (!profileData.name || !profileData.phone || !profileData.address || !profileData.email) {
        alert('Please fill all fields.');
        return;
    }

    localStorage.setItem('userProfile', JSON.stringify(profileData));
    alert('Profile saved! Redirecting to your profile.');
    window.location.href = 'profile.html';
});
</script>

</body>
</html>